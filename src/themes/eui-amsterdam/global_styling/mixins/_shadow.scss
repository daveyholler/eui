// Opacity variables are included to prevent breaks in downstream
// components. However they need to be removed prior to 8.0 and
// all components that use them must be updated.

// This file uses RGBA literal values responsibly
// This file uses off-pattern indedentation to be more readible

// sass-lint:disable no-color-literals, no-color-keywords, indentation, quotes

// Future deprecation warning
@mixin opacityWarning {
  @if variable-exists(opacity) {
    @warn 'The $opacity variable of EuiShadows will be depricated in a future version of EUI.';
  }
}

@mixin euiSlightShadow($color: $euiShadowColor, $opacity: 0) {
  @include opacityWarning;
  box-shadow:
    0 .8px .8px rgba($color, shadowOpacity(.04)),
    0 2.3px 2px rgba($color, shadowOpacity(.03)),
    0 5.4px 5px rgba($color, shadowOpacity(.02)),
    0 18px 17px rgba($color, shadowOpacity(.01));
}

@mixin euiBottomShadowSmall($color: $euiShadowColor, $opacity: 0) {
  @include opacityWarning;
  box-shadow:
    0 .7px 1.4px rgba($color, shadowOpacity(.07)),
    0 1.9px 4px rgba($color, shadowOpacity(.05)),
    0 4.5px 10px rgba($color, shadowOpacity(.05)),
    0 15px 32px rgba($color, shadowOpacity(.04));
}

@mixin euiBottomShadowMedium($color: $euiShadowColor, $opacity: 0) {
  @include opacityWarning;
  box-shadow:
    0 .9px 4px -1px rgba($color, shadowOpacity(.08)),
    0 2.6px 8px -1px rgba($color, shadowOpacity(.06)),
    0 5.7px 12px -1px rgba($color, shadowOpacity(.05)),
    0 15px 15px -1px rgba($color, shadowOpacity(.04));
}

// Similar to shadow medium but wihtout the bottom depth. Useful for popovers
// that drop UP rather than DOWN.
@mixin euiBottomShadowFlat($color: $euiShadowColor, $opacity: 0) {
  @include opacityWarning;
  box-shadow:
    0 0 .8px rgba($color, shadowOpacity(.06)),
    0 0 2px rgba($color, shadowOpacity(.04)),
    0 0 5px rgba($color, shadowOpacity(.04)),
    0 0 17px rgba($color, shadowOpacity(.03));
}

// adjustBorder allows the border color to match the drop shadow better so that there's better
// distinction between element bounds and the shadow (crisper borders)
@mixin euiBottomShadow($color: $euiShadowColorLarge, $opacity: 0, $adjustBorders: false) {
  @include opacityWarning;
  box-shadow:
    0 1px 5px rgba($color, shadowOpacity(.1)),
    0 3.6px 13px rgba($color, shadowOpacity(.07)),
    0 8.4px 23px rgba($color, shadowOpacity(.06)),
    0 23px 35px rgba($color, shadowOpacity(.05));

  // Never adjust borders if the border color is already on the dark side (dark theme)
  @if ($adjustBorders and not (lightness($euiBorderColor) < 50)) {
    border-color: transparent;
    border-top-color: transparent;
    border-bottom-color: transparent;
  }
}

@mixin euiBottomShadowLarge(
  $color: $euiShadowColorLarge,
  $opacity: 0,
  $adjustBorders: false,
  $reverse: false
) {
  @include opacityWarning;
  @if ($reverse) {
    box-shadow:
      0 2.7px -9px rgba($color, shadowOpacity(.13)),
      0 9.4px -24px rgba($color, shadowOpacity(.09)),
      0 21.8px -43px rgba($color, shadowOpacity(.08)),
      0 60 -65px rgba($color, shadowOpacity(.06));
  } @else {
    box-shadow:
      0 2.7px 9px rgba($color, shadowOpacity(.13)),
      0 9.4px 24px rgba($color, shadowOpacity(.09)),
      0 21.8px 43px rgba($color, shadowOpacity(.08)),
      0 60 65px rgba($color, shadowOpacity(.06));

  }

  // Never adjust borders if the border color is already on the dark side (dark theme)
  @if ($adjustBorders and not (lightness($euiBorderColor) < 50)) {
    border-color: transparent;
    border-top-color: transparent;
    border-bottom-color: transparent;
  }
}

@mixin euiSlightShadowHover($color: $euiShadowColor, $opacity: 0) {
  @include opacityWarning;
  box-shadow:
    0 1px 5px rgba($color, shadowOpacity(.1)),
    0 3.6px 13px rgba($color, shadowOpacity(.07)),
    0 8.4px 23px rgba($color, shadowOpacity(.06)),
    0 23px 35px rgba($color, shadowOpacity(.05));
}

@mixin euiSlightShadowActive($color: $euiShadowColor, $opacity: 0) {
  @include opacityWarning;
  @include euiSlightShadowHover($color);
}

@mixin euiOverflowShadow($direction: 'y', $side: 'both') {
  $hideHeight: $euiScrollBarCorner * 1.25;
  $gradient: null;
  $gradientStart:
  transparentize(red, .9) 0%,
  transparentize(red, 0) $hideHeight;
  $gradientEnd:
  transparentize(red, 0) calc(100% - #{$hideHeight}),
  transparentize(red, .9) 100%;
  @if ($side == 'both' or $side == 'start' or $side == 'end') {
    @if ($side == 'both') {
      $gradient: $gradientStart, $gradientEnd;
    } @else if ($side == 'start') {
      $gradient: $gradientStart;
    } @else {
      $gradient: $gradientEnd;
    }
  } @else {
    @warn "euiOverflowShadow() expects side to be 'both', 'start' or 'end' but got '#{$side}'";
  }

  @if ($direction == 'y') {
    mask-image: linear-gradient(to bottom, #{$gradient});
  } @else if ($direction == 'x') {
    mask-image: linear-gradient(to right, #{$gradient});
  } @else {
    @warn "euiOverflowShadow() expects direction to be 'y' or 'x' but got '#{$direction}'";
  }
}
